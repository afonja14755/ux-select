var W=Object.defineProperty;var z=(c,a,d)=>a in c?W(c,a,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[a]=d;var p=(c,a,d)=>(z(c,typeof a!="symbol"?a+"":a,d),d),A=(c,a,d)=>{if(!a.has(c))throw TypeError("Cannot "+d)};var l=(c,a,d)=>(A(c,a,"read from private field"),d?d.call(c):a.get(c)),o=(c,a,d)=>{if(a.has(c))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(c):a.set(c,d)},k=(c,a,d,_)=>(A(c,a,"write to private field"),_?_.call(c,d):a.set(c,d),d);var r=(c,a,d)=>(A(c,a,"access private method"),d);var UxSelect=function(){var s,v,U,x,$,f,D,L,V,b,H,y,j,S,B,E,I,C,M,T,N,q,P,w,R;"use strict";const c="";function a(G){const e=new Event("change");G.dispatchEvent(e)}function d(G){const e=new Event("input");G.dispatchEvent(e)}class _{constructor(e,t){o(this,v);o(this,x);o(this,f);o(this,L);o(this,b);o(this,y);o(this,S);o(this,E);o(this,C);o(this,T);o(this,q);o(this,w);p(this,"el");p(this,"config");p(this,"text");p(this,"state");p(this,"options");p(this,"groups");o(this,s,void 0);this.el=e,this.config=t||{isSearchable:!1,isGroupOptions:!1},this.text={placeholder:this.el.dataset.placeholder||this.config.placeholder||"Select an option",searchText:this.el.dataset.searchText||this.config.searchText||"Search",clearText:this.el.dataset.clearText||this.config.clearText||"Clear option(s)",selectedText:this.el.dataset.selectedText||this.config.selectedText||"Selected:"},this.state={multiple:this.el.multiple,disabled:this.el.disabled},this.options=[],this.groups=[],k(this,s,null),r(this,v,U).call(this)}disable(){this.state.disabled||(this.el.disabled=!0,l(this,s).classList.add("-disabled"),this.state.disabled=!0)}enable(){this.state.disabled&&(this.el.disabled=!1,l(this,s).classList.remove("-disabled"),this.state.disabled=!1)}update(e=!0){r(this,x,$).call(this),r(this,b,H).call(this),this.el.disabled?this.disable():this.enable(),e&&a(this.el)}clear(){this.options.forEach(e=>{e.attributes.selected&&(e.attributes.selected=!1,l(this,s).querySelector(`[data-value="${e.data.value}"]`).classList.remove("-selected"))}),this.el.value="",r(this,f,D).call(this),a(this.el)}destroy(){l(this,s).remove(),this.el.style.display=""}}return s=new WeakMap,v=new WeakSet,U=function(){r(this,x,$).call(this),r(this,y,j).call(this),r(this,w,R).call(this)},x=new WeakSet,$=function(){const e=this.el.options;if(e.length<=0)throw Error(`Null options at ${this.el}`);this.options=[];for(const t of e){let i;this.config.isGroupOptions?i=t.dataset.uxSelectGroup?t.dataset.uxSelectGroup:"empty":i="empty",this.groups.indexOf(i)===-1&&this.groups.push(i),this.options.push({attributes:{selected:t.getAttribute("selected")!==null,disabled:t.disabled,group:i},data:{text:t.textContent||"",value:t.value},element:t})}},f=new WeakSet,D=function(e=[]){const t=l(this,s).querySelector(".ux-select__title");e.length===1?(t.textContent=e[0],l(this,s).classList.add("-filled")):e.length>0&&this.state.multiple?(t.textContent=`${this.text.selectedText} ${e.length}`,l(this,s).classList.add("-filled")):(t.textContent=this.text.placeholder,l(this,s).classList.remove("-filled"))},L=new WeakSet,V=function(){let e=[];this.options.forEach(t=>{const i=l(this,s).querySelector(`[data-ux-group="${t.attributes.group}"] .ux-select-group__list`),n=document.createElement("li");n.classList.add("ux-select-group__elem"),n.dataset.value=t.data.value,n.textContent=t.data.text,t.attributes.selected&&(n.classList.add("-selected"),e.push(t.data.text!==null?t.data.text:"")),t.attributes.disabled&&n.classList.add("-disabled"),n.addEventListener("click",r(this,T,N).bind(this)),i.appendChild(n)}),r(this,f,D).call(this,e)},b=new WeakSet,H=function(){const e=l(this,s).querySelector(".ux-select__dropdown");e.innerHTML="",this.groups.forEach(t=>{const i=document.createElement("div");if(i.classList.add("ux-select__group","ux-select-group"),t==="empty"&&i.classList.add("-empty"),i.dataset.uxGroup=t,t!=="empty"){const h=document.createElement("div");h.classList.add("ux-select-group__title"),h.textContent=t,i.appendChild(h)}const n=document.createElement("ul");n.classList.add("ux-select-group__list"),i.appendChild(n),e.appendChild(i)}),r(this,L,V).call(this)},y=new WeakSet,j=function(){this.el.style.display="none";const e=document.createElement("div");e.classList.add("ux-select__head");const t=document.createElement("div");t.classList.add("ux-select__title"),t.textContent=this.text.placeholder;const i=document.createElement("button");i.type="button",i.classList.add("ux-select__clear"),i.title=this.text.clearText,e.append(t,i);const n=document.createElement("div");if(n.classList.add("ux-select__body"),this.config.isSearchable){const g=document.createElement("div");g.classList.add("ux-select__search");const O=document.createElement("input");O.type="search",O.classList.add("ux-select-search__input"),O.placeholder=this.text.searchText,g.appendChild(O),n.appendChild(g)}const h=document.createElement("div");h.classList.add("ux-select__dropdown"),n.appendChild(h);const m=document.createElement("div");let u=["ux-select",...this.el.classList];this.state.multiple&&u.push("-multiple"),this.state.disabled&&u.push("-disabled"),m.classList.add(...u),m.append(e,n),this.el.insertAdjacentElement("afterend",m),k(this,s,this.el.nextElementSibling),r(this,b,H).call(this)},S=new WeakSet,B=function(e){e.preventDefault(),!this.state.disabled&&e.target!==l(this,s).querySelector(".ux-select__clear")&&!l(this,s).querySelector(".ux-select__body").contains(e.target)&&(l(this,s).classList.contains("-shown")?l(this,s).classList.remove("-shown"):(l(this,s).classList.add("-shown"),this.config.isSearchable&&(l(this,s).querySelector(".ux-select-search__input").value="",l(this,s).querySelector(".ux-select-search__input").focus())))},E=new WeakSet,I=function(e){l(this,s).contains(e.target)||l(this,s).classList.remove("-shown")},C=new WeakSet,M=function(e){return e.preventDefault(),this.state.disabled?!1:this.clear()},T=new WeakSet,N=function(e){if(e.preventDefault(),e.target!==null){const t=e.target;if(t.classList.contains("-disabled"))return!1;if(this.state.multiple){e.stopPropagation();const i=this.el.querySelector(`[value="${t.dataset.value}"]`);if(!i)throw Error("Option equal this value not found");t.classList.contains("-selected")?i.removeAttribute("selected"):i.setAttribute("selected","")}else if(!t.classList.contains("-selected"))this.el.querySelectorAll("option").forEach(i=>{i.value===t.dataset.value?i.setAttribute("selected",""):i.removeAttribute("selected")});else return!1;return this.update()}},q=new WeakSet,P=function(e){if(e.target!==null){const i=e.target.value.toLowerCase();if(i==="")l(this,s).querySelectorAll(".ux-select-group__elem").forEach(n=>n.style.display=""),l(this,s).querySelectorAll(".ux-select-group").forEach(n=>n.style.display="");else{const n=new RegExp(i);this.options.forEach(h=>{const m=n.test(h.data.text.toLowerCase()),u=l(this,s).querySelector(`[data-value="${h.data.value}"]`);u.style.display=m?"":"none";const g=u.closest(".ux-select-group");g.style.display=u.closest(".ux-select-group__list").innerText!==""?"":"none"})}d(this.el)}},w=new WeakSet,R=function(){l(this,s).addEventListener("click",r(this,S,B).bind(this)),l(this,s).querySelector(".ux-select__clear").addEventListener("click",r(this,C,M).bind(this)),window.addEventListener("click",r(this,E,I).bind(this)),this.config.isSearchable&&l(this,s).querySelector(".ux-select-search__input").addEventListener("input",r(this,q,P).bind(this))},_}();
