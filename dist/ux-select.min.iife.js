var W=Object.defineProperty;var z=(c,a,r)=>a in c?W(c,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[a]=r;var x=(c,a,r)=>(z(c,typeof a!="symbol"?a+"":a,r),r),O=(c,a,r)=>{if(!a.has(c))throw TypeError("Cannot "+r)};var l=(c,a,r)=>(O(c,a,"read from private field"),r?r.call(c):a.get(c)),u=(c,a,r)=>{if(a.has(c))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(c):a.set(c,r)},k=(c,a,r,L)=>(O(c,a,"write to private field"),L?L.call(c,r):a.set(c,r),r);var d=(c,a,r)=>(O(c,a,"access private method"),r);var UxSelect=function(){var i,y,P,m,$,b,D,v,j,_,H,S,N,E,U,C,V,q,B,w,I,T,M,G,R;"use strict";const c="";function a(A){const e=new Event("change");A.dispatchEvent(e)}function r(A){const e=new Event("input");A.dispatchEvent(e)}class L{constructor(e,s){u(this,y);u(this,m);u(this,b);u(this,v);u(this,_);u(this,S);u(this,E);u(this,C);u(this,q);u(this,w);u(this,T);u(this,G);x(this,"el");x(this,"config");x(this,"text");x(this,"state");x(this,"options");x(this,"groups");u(this,i,void 0);this.el=e,this.config=s||{isSearchable:!1,isGroupOptions:!1},this.text={placeholder:this.el.dataset.placeholder||this.config.placeholder||"Select an option",searchText:this.el.dataset.searchText||this.config.searchText||"Search",clearText:this.el.dataset.clearText||this.config.clearText||"Clear option(s)",selectedText:this.el.dataset.selectedText||this.config.selectedText||"Selected:"},this.state={multiple:this.el.multiple,disabled:this.el.disabled},this.options=[],this.groups=[],k(this,i,null),d(this,y,P).call(this)}disable(){this.state.disabled||(this.el.disabled=!0,l(this,i).classList.add("-disabled"),this.state.disabled=!0)}enable(){this.state.disabled&&(this.el.disabled=!1,l(this,i).classList.remove("-disabled"),this.state.disabled=!1)}update(e=!0){d(this,m,$).call(this),d(this,_,H).call(this),this.el.disabled?this.disable():this.enable(),e&&a(this.el)}clear(){this.options.forEach(e=>{e.attributes.selected&&(e.attributes.selected=!1,l(this,i).querySelector(`[data-value="${e.data.value}"]`).classList.remove("-selected"),e.element.removeAttribute("selected"))}),d(this,b,D).call(this),a(this.el)}destroy(){l(this,i).remove(),this.el.style.display=""}}return i=new WeakMap,y=new WeakSet,P=function(){d(this,m,$).call(this),d(this,S,N).call(this),d(this,G,R).call(this)},m=new WeakSet,$=function(){const e=this.el.options;if(e.length<=0)throw Error(`Null options at ${this.el}`);this.options=[];for(const s of e){let t;this.config.isGroupOptions?t=s.dataset.uxSelectGroup?s.dataset.uxSelectGroup:"empty":t="empty",this.groups.indexOf(t)===-1&&this.groups.push(t),this.options.push({attributes:{selected:s.getAttribute("selected")!==null,disabled:s.disabled,group:t},data:{text:s.textContent||"",value:s.value},element:s})}},b=new WeakSet,D=function(e=[]){const s=l(this,i).querySelector(".ux-select__title");e.length===1?(s.textContent=e[0],l(this,i).classList.add("-filled")):e.length>0&&this.state.multiple?(s.textContent=`${this.text.selectedText} ${e.length}`,l(this,i).classList.add("-filled")):(s.textContent=this.text.placeholder,l(this,i).classList.remove("-filled"))},v=new WeakSet,j=function(){new Promise(e=>{let s=[];this.options.forEach(t=>{const n=document.createElement("li");n.classList.add("ux-select-group__elem"),n.dataset.value=t.data.value,n.textContent=t.data.text,t.attributes.selected&&(n.classList.add("-selected"),s.push(t.data.text!==null?t.data.text:"")),t.attributes.disabled&&n.classList.add("-disabled"),n.addEventListener("click",d(this,w,I).bind(this)),l(this,i).querySelector(`[data-ux-group="${t.attributes.group}"] .ux-select-group__list`).appendChild(n)}),d(this,b,D).call(this,s),this.config.isGroupOptions?e(!0):e(!1)}).then(e=>{if(!e)return;const s=l(this,i).querySelectorAll(".ux-select-group");s.length>0&&s.forEach(t=>{const n=t.querySelector(".ux-select-group__list");if(n){const h=n.querySelectorAll(".ux-select-group__elem"),o=n.querySelectorAll(".ux-select-group__elem.-disabled");h.length===o.length?t.classList.add("-disabled"):t.classList.remove("-disabled")}})})},_=new WeakSet,H=function(){const e=l(this,i).querySelector(".ux-select__dropdown");e.innerHTML="",this.groups.forEach(s=>{const t=document.createElement("div");if(t.classList.add("ux-select__group","ux-select-group"),s==="empty"&&t.classList.add("-empty"),t.dataset.uxGroup=s,s!=="empty"){const h=document.createElement("div");h.classList.add("ux-select-group__title"),h.textContent=s,t.appendChild(h)}const n=document.createElement("ul");n.classList.add("ux-select-group__list"),t.appendChild(n),e.appendChild(t)}),d(this,v,j).call(this)},S=new WeakSet,N=function(){this.el.style.display="none";const e=document.createElement("div");e.classList.add("ux-select__head");const s=document.createElement("div");s.classList.add("ux-select__title"),s.textContent=this.text.placeholder;const t=document.createElement("button");t.type="button",t.classList.add("ux-select__clear"),t.title=this.text.clearText,e.append(s,t);const n=document.createElement("div");if(n.classList.add("ux-select__body"),this.config.isSearchable){const f=document.createElement("div");f.classList.add("ux-select__search");const g=document.createElement("input");g.type="search",g.classList.add("ux-select-search__input"),g.placeholder=this.text.searchText,f.appendChild(g),n.appendChild(f)}const h=document.createElement("div");h.classList.add("ux-select__dropdown"),n.appendChild(h);const o=document.createElement("div");let p=["ux-select",this.el.classList];this.state.multiple&&p.push("-multiple"),this.state.disabled&&p.push("-disabled"),o.className=p.join(" "),o.append(e,n),this.el.insertAdjacentElement("afterend",o),k(this,i,this.el.nextElementSibling),d(this,_,H).call(this)},E=new WeakSet,U=function(e){e.preventDefault(),!this.state.disabled&&e.target!==l(this,i).querySelector(".ux-select__clear")&&!l(this,i).querySelector(".ux-select__body").contains(e.target)&&(l(this,i).classList.contains("-shown")?l(this,i).classList.remove("-shown"):(l(this,i).classList.add("-shown"),this.config.isSearchable&&(l(this,i).querySelector(".ux-select-search__input").value="",l(this,i).querySelector(".ux-select-search__input").focus())))},C=new WeakSet,V=function(e){l(this,i).contains(e.target)||l(this,i).classList.remove("-shown")},q=new WeakSet,B=function(e){return e.preventDefault(),this.state.disabled?!1:this.clear()},w=new WeakSet,I=function(e){if(e.preventDefault(),e.target!==null){const s=e.target;if(s.classList.contains("-disabled"))return!1;if(this.state.multiple){e.stopPropagation();const t=this.el.querySelector(`[value="${s.dataset.value}"]`);if(!t)throw Error("Option equal this value not found");s.classList.contains("-selected")?t.removeAttribute("selected"):t.setAttribute("selected","")}else if(!s.classList.contains("-selected"))this.el.querySelectorAll("option").forEach(t=>{t.value===s.dataset.value?t.setAttribute("selected",""):t.removeAttribute("selected")});else return!1;return this.update()}},T=new WeakSet,M=function(e){if(e.target!==null){const s=e.target,t=s.value.toLowerCase(),n=l(this,i).querySelectorAll(".ux-select-group");if(t==="")l(this,i).querySelectorAll(".ux-select-group__elem").forEach(o=>o.style.display=""),this.config.isGroupOptions&&n.forEach(o=>o.style.display="");else{const h=new RegExp(t);new Promise(o=>{this.options.forEach(p=>{const f=h.test(p.data.text.toLowerCase()),g=l(this,i).querySelector(`[data-value="${p.data.value}"]`);g.style.display=f?"":"none"}),this.config.isGroupOptions?o(!0):o(!1)}).then(o=>{o&&n.forEach(p=>{const f=p.querySelector(".ux-select-group__list");f&&(p.style.display=f.clientHeight!==0?"":"none")})})}r(this.el)}},G=new WeakSet,R=function(){l(this,i).addEventListener("click",d(this,E,U).bind(this)),l(this,i).querySelector(".ux-select__clear").addEventListener("click",d(this,q,B).bind(this)),window.addEventListener("click",d(this,C,V).bind(this)),this.config.isSearchable&&l(this,i).querySelector(".ux-select-search__input").addEventListener("input",d(this,T,M).bind(this))},L}();
